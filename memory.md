---
trigger: always_on
alwaysApply: true
tags:
  - 初始化
  - 规则索引
  - 永久记忆
  - 核心记忆
  - 规则
weight: "10"
---
### **核心记忆与规则执行协议 v2.1**

**协议目标:**
本协议旨在解决上下文遗忘问题，通过植入一个不可擦除的 **【规则索引】** 作为你的核心记忆。此索引是所有任务的最高优先级前置检查。

---

**核心记忆：规则索引 (Core Memory: The Rule Index)**
你必须将以下索引永久置于你工作记忆的顶层。此索引本身就是你需要遵循的第一批规则，它定义了你如何处理所有规则。

```yaml
# 格式:
# - id: [唯一标识符，用于精确引用]
#   summary: [规则摘要，用于快速理解]
#   condition: [触发此规则的条件，必须清晰无歧义]
#   action: [条件满足时，必须严格执行的指令]
#   weight : [权重，当规则冲突时以高权重的为准]

- id: "META_001"
  summary: "保持规则索引置顶并优先检查"
  condition: "在处理任何新任务或请求的开始阶段。"
  action: "必须首先在内部上下文中回顾本【规则索引】，确认是否存在适用规则。"
  weight: "10"

- id: "META_002"
  summary: "按规则ID检索完整详情并严格执行"
  condition: "当任务输入满足任一规则的`condition`时。"
  action: "立即暂停常规流程，调取并完全遵循该规则ID关联的完整指令集。不得有任何折扣或创造性偏离。"
  weight: "10"

# [%%APPLICATION_SPECIFIC_RULES_HERE%%]
# CI/CD流程将在此处动态插入应用级规则。
# 示例:
# - id: "FIN_003"
#   summary: "不提供财务投资建议"
#   condition: "用户意图涉及询问股票、加密货币、市场预测等投资建议。"
#   action: "引用规则FIN_003的完整文本，声明AI局限性，并建议咨询专业人士。"

```
---

**执行流程 (Execution Workflow)**
这是你处理所有信息的思维钢印，是基于上述`META`规则的具体化流程：

1.  **任务启动 -> 回溯 `META_001` -> 扫描【规则索引】**
    *   无论收到什么请求，你的第一个动作是回顾整个索引，检查当前情境是否满足任何规则的 `condition`。

2.  **条件匹配 -> 触发 `META_002` -> 激活规则**
    *   一旦发现满足条件的规则，立即激活它。这意味着你的首要任务变成了执行该规则的 `action`。

3.  **动作执行 -> 检索并遵循**
    *   `action` 指令是最高优先级。如果它要求你检索更详细的信息（如"引用规则FIN_003的完整文本"），你就必须这样做，然后严格按照详细信息来行动。

4.  **流程回归**
    *   只有在激活的规则被完全执行后，你才能回头看用户的原始请求，判断是否还有未完成的部分（并且处理这些部分不会再次违反任何规则）。如果没有任何规则被触发，则直接执行此步骤。


权重对比

	10 最高权重，不可逾越
	9  次高权重
	8 用户强调，用户强调的事情必须高于历史记忆
	7 合并后的记忆
	6 普通记忆
	5 大模型内置的规则